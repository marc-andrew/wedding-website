!function(){"use strict";const e=document.getElementsByClassName("no-js");for(;e.length>0;)e[0].classList.remove("no-js");firebase.initializeApp({apiKey:"AIzaSyCp2KnROYMdFBG_xLXA3a1FXNPgf3OmEzc",authDomain:"wedding-website-firestore.firebaseapp.com",databaseURL:"https://wedding-website-firestore.firebaseio.com",projectId:"wedding-website-firestore",storageBucket:"wedding-website-firestore.appspot.com",messagingSenderId:"230751398963"});const t=firebase.firestore.FieldValue.serverTimestamp(),n=firebase.firestore();n.settings({timestampsInSnapshots:!0});let i=n.collection("rsvp");const s=function(e){let t,n=this;n.id=e,n.init=function(e){for(let t=0;t<n.id.length;t++)n.slider(n.id[t],n.id[t].childElementCount,e)},n.slider=function(e,n,i){let s=0;t=i||3e3,e.children[0].classList.add("img--container-visible"),setInterval(function(){s<n-1?s++:s=0;for(let t=0;t<e.children.length;t++)if(e.children[t].classList.contains("img--container-visible")){e.children[t].classList.remove("img--container-visible");break}e.children[s].classList.add("img--container-visible")},i)},n.timeOut=function(){setTimeout(alertFunc,t)}},o=function(e){e.preventDefault();let t=this.getAttribute("data-target-id");window.location.hash=t,T(),M(!0)},a=document.getElementsByClassName("nav__list-link"),l=document.getElementsByClassName("btn--burger")[0],d=document.getElementsByClassName("nav--primary")[0],c=document.getElementsByClassName("t");let r=[],u=0;const m=document.getElementsByClassName("rsvp")[0],v=document.getElementById("rsvp-form"),f=document.getElementById("rsvp-email"),g=document.getElementById("rsvp-name"),p=document.getElementById("rsvp-lastname"),h=document.getElementById("checkNameBtn"),w=document.getElementById("rsvp-guests"),L=document.getElementById("rsvp-attending"),b=document.getElementById("rsvpBackBtn"),E=document.getElementsByClassName("rsvp--col-guests")[0];let y=0;const I=document.getElementsByClassName("map")[0],B=document.getElementsByClassName("btn--view-map")[0];for(let e=0;e<a.length;e++)a[e].addEventListener("click",o,!1);function C(e){return/([^\s])/.test(e)}function N(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function M(e){e?(l.classList.remove("btn--burger-active"),d.classList.remove("nav--primary-open"),document.removeEventListener("click",A)):(l.classList.add("btn--burger-active"),d.classList.add("nav--primary-open"),document.addEventListener("click",A))}function A(e){e.target.classList.contains("btn__burger-icon")||e.target.classList.contains("btn--burger")||e.target.classList.contains("nav--primary")||M(!0)}function T(e){e=e||window.location.hash.substring(1);let t=document.querySelector('[data-section-id="'+e+'"]');t&&function(e,t,n){let i=window.scrollY||document.documentElement.scrollTop,s=0,o=Math.max(.1,Math.min(Math.abs(i-e)/t,.8)),a={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};!function t(){let l=(s+=1/60)/o,d=a[n](l);l<1?(requestAnimFrame(t),window.scrollTo(0,i+(e-i)*d)):window.scrollTo(0,e)}()}(t.offsetTop-52,500,"easeInOutQuint")}v.setAttribute("novalidate","novalidate"),f.addEventListener("blur",function(e){N(this.value)?this.classList.remove("rsvp--input-invalid"):this.classList.add("rsvp--input-invalid")},!0),g.addEventListener("blur",function(e){C(this.value)?this.classList.remove("rsvp--input-invalid"):this.classList.add("rsvp--input-invalid")},!0),p.addEventListener("blur",function(e){C(this.value)?this.classList.remove("rsvp--input-invalid"):this.classList.add("rsvp--input-invalid")},!0),p.addEventListener("focus",function(e){v.classList.remove("rsvp--form-invalid-user")},!1),h.addEventListener("click",function(e){let t=p.value;if(C(t)){n.collection("rsvp").doc(t.toLowerCase()).get().then(function(e){if(e.exists){let t=e.data();if(console.log("Document data:",t),!1===t.confirmed){let e=t.maxGuests,n=[];if(v.classList.add("rsvp--form-valid-user"),v.classList.remove("rsvp--form-invalid-user"),p.readOnly=!0,e>0){for(let t=0;t<=e;t++)n.push('<option value="'+t+'">'+t+"</option>");w.innerHTML=n.join(""),v.classList.add("rsvp--form-with-guests")}}else console.log("Already confirmed")}else y<9?(v.classList.add("rsvp--form-invalid-user"),y++):console.log("Block user"),console.log("No such document!")}).catch(function(e){console.log(e)})}else p.classList.add("rsvp--input-invalid")}),b.addEventListener("click",function(e){v.classList.remove("rsvp--form-valid-user","rsvp--form-with-guests"),p.readOnly=!1,E.classList.remove("rsvp--col-to-show"),w.options.length=0}),v.addEventListener("submit",function(e){let n=N(f.value),s=C(g.value),o=C(p.value);if(this.classList.contains("rsvp--form-valid-user"))if(n&&s&&o){let n,s="true"===L.options[L.selectedIndex].value;e.preventDefault(),console.log("Send the data below"),console.log("Email: ",f.value),console.log("Name: ",g.value),console.log("Last Name: ",p.value),console.log("Attending: ",s),v.classList.contains("rsvp--form-with-guests")&&(console.log("Guests: ",w.options[w.selectedIndex].value),n=w.options[w.selectedIndex].value),i.doc(p.value.toLowerCase()).update({attending:s,confirmed:!0,name:g.value,additionalGuests:parseInt(n),dateConfirmed:t}).then(function(){console.log("Status saved!")}).catch(function(e){console.log("Got an error: ",e)}),m.classList.add("rsvp--success"),f.classList.remove("rsvp--input-invalid"),g.classList.remove("rsvp--input-invalid"),p.classList.remove("rsvp--input-invalid")}else e.preventDefault(),n?f.classList.remove("rsvp--input-invalid"):f.classList.add("rsvp--input-invalid"),s?g.classList.remove("rsvp--input-invalid"):g.classList.add("rsvp--input-invalid"),o?p.classList.remove("rsvp--input-invalid"):p.classList.add("rsvp--input-invalid");else e.preventDefault()}),B.addEventListener("click",function(e){T(this.getAttribute("data-target-id"))}),l.addEventListener("click",function(e){this.classList.contains("btn--burger-active")?M(!0):M(!1)}),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},new function(e){let t=this,n={};t.id=e,t.init=function(){t.windowSize(),t.imgData(),t.windowScroll(),t.windowResize()},t.imgData=function(){for(let e=0;e<t.id.length;e++){let n=t.id[e];"true"!==n.getAttribute("data-lazy")||n.parentNode.classList.contains("img--loaded")?t.changeUrl(n,t.bpImg(n)):t.inView(n)}},t.bpImg=function(e){let i=e.getAttribute("data-srcset").match(/\s([0-9]+)w/g).join().replace(/\s/g,"").split(",");return e.getAttribute("data-srcset").match(/([a-zA-Z0-9/?$.:_-]+)\s/g).join().replace(/\s/g,"").split(",")[t.getBp(n.winW,i)]},t.windowSize=function(){let e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n.winW=e,n.winH=t},t.inView=function(e){let i=e.nextElementSibling.getBoundingClientRect(),s=i.top,o=i.height,a=n.winH+50;s>=0?s<=a&&t.changeUrl(e,t.bpImg(e)):s+o+50>=0&&t.changeUrl(e,t.bpImg(e))},t.getBp=function(e,t){for(let n=t.length;n>0;n--){if(e>=parseInt(t[n-1]))return parseInt(n-1);if(e<t[0])return 0}},t.changeUrl=function(e,t){let n=e.nextElementSibling;if(n.getAttribute("src")!==t&&!e.parentNode.classList.contains("loading")){e.parentNode.classList.add("loading");let i=new Image;i.addEventListener("load",function(){n.setAttribute("src",t),e.parentNode.classList.remove("loading"),e.parentNode.classList.contains("img--loaded")||e.parentNode.classList.add("img--loaded")},!1),i.src=t}},t.windowScroll=function(){window.addEventListener("scroll",function(e){t.imgData()})},t.windowResize=function(){let e;function n(){t.windowSize(),t.imgData()}window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(n,100)})}}(document.getElementsByClassName("res-data")).init(),new function(e){let t=this,n={};t.id=e,t.init=function(){t.windowSize(),t.loopEl(),t.windowScroll(),t.windowResize()},t.loopEl=function(){for(let e=0;e<t.id.length;e++)t.inView(t.id[e])},t.addClass=function(e){e.classList.contains("hero")&&!e.classList.contains("visible")&&function(){for(let e=0;e<c.length;e++)r.push(e);r=function(e){let t,n,i;for(i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),n=e[i],e[i]=e[t],e[t]=n;return e}(r),u=r.length,function(){let e,t=0;e=setInterval(function(){c[r[t]].classList.add("visible"),++t===u&&clearInterval(e)},20)}()}(),e.classList.contains("venue")&&!e.classList.contains("visible")&&new s(document.getElementsByClassName("venue__slider")).init(5e3),e.classList.contains("map")&&!e.classList.contains("visible")&&(I.innerHTML='<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2659.039350114157!2d16.374486315703955!3d48.20585797922898!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x476d079e21d92331%3A0x417b4c58d40531b5!2sPalais+Coburg+Residenz!5e0!3m2!1sen!2suk!4v1537184868153" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>'),e.classList.add("visible")},t.windowSize=function(){let e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n.winW=e,n.winH=t},t.inView=function(e){let i=e.getBoundingClientRect(),s=i.top,o=i.height;s>=0?s<=n.winH&&t.addClass(e):s+o>=0&&t.addClass(e)},t.windowScroll=function(){window.addEventListener("scroll",function(e){t.loopEl()})},t.windowResize=function(){let e;function n(){t.windowSize(),t.loopEl()}window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(n,100)})}}(document.getElementsByClassName("container")).init(),new function(e){let t=this;t.id=e,t.init=function(e){let n,i=new Date(e),s=1e3,o=60*s,a=60*o,l=24*a;function d(){let e=new Date,d=i-e,r=Math.floor(d/l),u=Math.floor(d%l/a),m=Math.floor(d%a/o),v=Math.floor(d%o/s);if(d<0){clearInterval(n);for(let e=0;e<t.id.children.length;e++)t.id.children[e].innerHTML="00",t.id.children[e].innerHTML="00",t.id.children[e].innerHTML="00",t.id.children[e].innerHTML="00"}else for(let e=0;e<t.id.children.length;e++)t.id.children[e].classList.contains("days")&&(t.id.children[e].innerHTML=c(r)),t.id.children[e].classList.contains("hrs")&&(t.id.children[e].innerHTML=c(u)),t.id.children[e].classList.contains("mins")&&(t.id.children[e].innerHTML=c(m)),t.id.children[e].classList.contains("secs")&&(t.id.children[e].innerHTML=c(v))}function c(e){return(e<10?"0":"")+e}n=setInterval(d,1e3),d()}}(document.getElementsByClassName("countdown__timer")[0]).init("08/06/2019 14:00 GMT"),T(),window.onhashchange=function(){T()},document.getElementById("testBtn").addEventListener("click",function(e){i.doc("waight").set({attending:!1,confirmed:!1,dateConfirmed:null,name:null,maxGuests:1,additionalGuests:0,guestNames:null}),i.doc("valookaran").set({attending:!1,confirmed:!1,dateConfirmed:null,name:null,maxGuests:0,additionalGuests:0,guestNames:null}),i.doc("tee").set({attending:!1,confirmed:!1,dateConfirmed:null,name:null,maxGuests:1,additionalGuests:0,guestNames:null}),i.doc("sosa").set({attending:!1,confirmed:!1,dateConfirmed:null,name:null,maxGuests:0,additionalGuests:0,guestNames:null}),i.doc("kaiser").set({attending:!1,confirmed:!1,dateConfirmed:null,name:null,maxGuests:0,additionalGuests:0,guestNames:null})})}();